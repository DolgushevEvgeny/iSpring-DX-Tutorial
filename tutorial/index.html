<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
        <title>Руководство пользователя</title>
        <style>
            pre strong {
                background: #BBFFCC;
            }
      </style>
    </head>

    <body>
        <h1>Шаг 1. Подготовка индексной страницы</h1>
        <p>
            Создать HTML-страницу с плейсхолдером для размещения презентации:
        </p>
        <pre>
            &lt;!DOCTYPE html&gt;
            &lt;html&gt;
                &lt;head&gt;
                    &lt;meta charset=&quot;utf-8&quot;&gt;
                    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1&quot;/&gt;
                    &lt;title&gt;Your web page title&lt;/title&gt;
                &lt;/head&gt;

                &lt;body&gt;
                    &lt;h2&gt;Here will be your presentation&lt;/h2&gt;
                    &lt;!-- Presentation placeholder --&gt;
                &lt;/body&gt;
            &lt;/html&gt;
        </pre>



        <h1>Шаг 2. Публикация презентации</h1>
        <p>
            Опубликовать презентацию в Combined-режиме с использованием плеера None.
            В этом режиме будут отключены все компоненты навигации плеера
        </p>
        <img src="images/publish-general.png" alt="Publish window - General Tab"/>
        <p>
            Убедиться, что на вкладке Advanced установлена опция Enable presentation control API.
            Также запоминаем размеры слайда (864x540 пикселей).
        </p>
        <img src="images/publish-advanced.png" alt="Publish window - Advanced Tab"/>
        <p>
            Создать каталог presentation рядом с файлом index.html.
            Скопировать в него файлы опубликованной презентации.
        </p>
        <img src="images/presentation-folder-content.png" alt="Presentation folder content"/>



        <h1>Шаг 3. Встраиваем презентацию в страницу</h1>
        <p>
            При помощи тэга iframe встраиваем презентацию внутри страницы.
            В HTML-стилях задаем ширину и высоту фрейма презентации (864 * 540 пикселей), а также наличие рамки.
        </p>
        <pre>
            &lt;!DOCTYPE html&gt;
            &lt;html&gt;
                &lt;head&gt;
                    &lt;meta charset=&quot;utf-8&quot;&gt;
                    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1&quot;/&gt;
                    &lt;title&gt;Your web page title&lt;/title&gt;
                    <strong>&lt;style&gt;
                        #presentation {
                            width: 864px;
                            height: 540px;
                            border: 1px solid #000;
                            }
                    &lt;/style&gt;</strong>
                &lt;/head&gt;
                &lt;body&gt;
                    <strong>&lt;iframe id=&quot;presentation&quot; src=&quot;presentation/index.html&quot;&gt;&lt;/iframe&gt;</strong>
                &lt;/body&gt;
            &lt;/html&gt;
        </pre>
        <p>
            В результате презентация будет встроена внутрь указанного фрейма
        </p>



        <h1>Шаг 4. Подключаемся к плееру презентации</h1>
        <p>
            Добавляем новый элемент - текстовое поле, которое будет отображать текущее состояние презентации.
            При помощи тэга script добавляем для страницы сценарий, в котором подключаемся к плееру и изменяем текст, в добавленном поле, при начале проигрывания презентации.
            В HTML-стилях задаем шрифт и расположение добвленного текстового поля.
        </p>
        <pre>
            &lt;!DOCTYPE html&gt;
            &lt;html&gt;
                &lt;head&gt;
                    &lt;meta charset=&quot;utf-8&quot;&gt;
                    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1&quot;/&gt;
                    &lt;title&gt;Your web page title&lt;/title&gt;
                    &lt;style&gt;
                        #presentation {
                            width: 864px;
                            height: 540px;
                            border: 1px solid #000;
                            }
                        <strong>
                          #state {
                              float:left;
                              font: 18px 'Arial', sans-serif;
                              margin-left: 50px;
                          }
                        </strong>
                    &lt;/style&gt;
                &lt;/head&gt;
                &lt;body&gt;
                    &lt;iframe id=&quot;presentation&quot; src=&quot;presentation/index.html&quot;&gt;&lt;/iframe&gt;
                    <strong>&lt;p id=&quot;state&quot;&gt;Presentation is not running&lt;&gt;
                    &lt;script&gt;
                        var state = document.getElementById(&quot;state&quot;);
                        var ispringPresentationConnector = {};

                        ispringPresentationConnector.register = function(player)
                        {
                            state.innerHTML = &quot;Presentation is running&quot;;
                        };
                    &lt;/script&gt;</strong>
                &lt;/body&gt;
            &lt;/html&gt;
        </pre>



        <h1>Шаг 5. Создание панели навигации</h1>
        <p>
            Теперь мы уже знаем что при загрузке страницы, презентация начинает проигрываться автоматически.
            Значит элемент "текстовое поле" нам больше не нужен и его можно убрать, а также можно убрать его из HTML-стилей.
            И код будет выглядеть так:
        </p>
        <pre>
            &lt;!DOCTYPE html&gt;
                &lt;html&gt;
                    &lt;head&gt;
                        &lt;meta charset=&quot;utf-8&quot;&gt;
                        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1&quot;/&gt;
                        &lt;title&gt;Your web page title&lt;/title&gt;
                        &lt;style&gt;
                            #presentation {
                                float: left;
                                width: 864px;
                                height: 540px;
                                border: 1px solid #000;
                                }
                        &lt;/style&gt;
                    &lt;/head&gt;
                    &lt;body&gt;
                        &lt;iframe id=&quot;presentation&quot; src=&quot;presentation/index.html&quot;&gt;&lt;/iframe&gt;

                        &lt;script&gt;
                            var ispringPresentationConnector = {};

                            ispringPresentationConnector.register = function(player)
                            {

                            }
                        &lt;/script&gt;
                    &lt;/body&gt;
                &lt;/html&gt;
        </pre>
        <p>
            Добавляем новые элементы - кнопки, с помощью которых будем перелистывать слайды.
            В HTML-стилях задаем визуализацию и расположение кнопок на странице.
        </p>
        <pre>
            &lt;!DOCTYPE html&gt;
            &lt;html&gt;
                &lt;head&gt;
                    &lt;meta charset=&quot;utf-8&quot;&gt;
                    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1&quot;/&gt;
                    &lt;title&gt;Your web page title&lt;/title&gt;
                    &lt;style&gt;
                        #presentation {
                            width: 864px;
                            height: 540px;
                            border: 1px solid #000;
                            }
                        <strong>
                        #prev, #next {
                            float: left;
                            width: 80px;
                            height: 35px;
                        }
                        </strong>
                    &lt;/style&gt;
                &lt;/head&gt;
                &lt;body&gt;
                    &lt;iframe id=&quot;presentation&quot; src=&quot;presentation/index.html&quot;&gt;&lt;/iframe&gt;
                    <strong>&lt;button id=&quot;prev&quot;&gt;Prev&lt;/button&gt;
                    &lt;button id=&quot;next&quot;&gt;Next&lt;/button&gt;
                    </strong>
                    &lt;script&gt;
                        <strong>
                        var prevBtn = document.getElementById(&quot;prev&quot;);
                        var nextBtn = document.getElementById(&quot;next&quot;);
                        </strong>
                        var ispringPresentationConnector = {};

                        ispringPresentationConnector.register = function(player)
                        {

                        }
                    &lt;/script&gt;
                &lt;/body&gt;
            &lt;/html&gt;
        </pre>
        <p>
            Устанавливаем события на кнопки при нажатии. Таким образом, при нажатии на кнопку "Next", презентация будет переходить на слайд вперед,
            а при нажатии на кнопку "Prev" - на слайд назад.
        </p>
        <pre>
            <strong>
            function initButtonsEventsHandlers()
            {
                prevBtn.onclick = function()
                {
                    playbackController.gotoPreviousSlide();
                };

                nextBtn.onclick = function()
                {
                    playbackController.gotoNextSlide();
                };
            }
            </strong>
        </pre>
        <p>
            Добавляем новый элемент - текстовое поле, в которое будут выводиться значения, отражающие индекс текущего слайда и общее количество слайдов.
            В HTML-стилях задаем шрифт и расположение добвленного текстового поля.
        </p>
        <pre>
            <strong>
            #slide-counter{
                float:left;
                font-size: 12pt;
                font-family: Arial, sans-serif;
                padding-top: 10px;
                text-align: center;
                width: 80px;
                height: 22px;
                display: inline-block;
                border: 1px solid #000;
            }</strong>
        </pre>
        <p>
            Все три элемента, в том числе и кнопки, объединяем в один блок, т.к. они представляют собой единую панель управления.
        </p>
        <pre>
            <strong>
            &lt;div class=&quot;buttons&quot;&gt;
                &lt;button id=&quot;prev&quot;&gt;Prev&lt;/button&gt;
                &lt;div id=&quot;slide-counterde&quot;&gt;
                    &lt;p id=&quot;cur-slide&quot;&gt;&lt;/p&gt;
                &lt;/div&gt;
                &lt;button id=&quot;next&quot;&gt;Next&lt;/button&gt;
            &lt;/div&gt;
            </strong>
        </pre>
        <p>
            Добавляем обработчик событий при изменении слайда презентации на другой.
        </p>
        <pre>
            <strong>
            function initPlaybackControllerEventsHandlers()
            {
                playbackController.slideChangeEvent().addHandler(function(slideIndex)
                {
                    slideIndexLabel.innerHTML = &quot;&quot; + (slideIndex) + &quot;/&quot; + (slidesCount - 1);
                });
            }
            </strong>
        </pre>



        <h1>Шаг 6. Доработка панели навигации.</h1>
        <p>
            Теперь мы можем узнавать, на каком по счету слайде находится наша презентация.
            Но давайте добавим возможность задавать значение следующего слайда через ввод нового значения.
            Тогда изменим тег поля в котором отображается счетчик слайдов и добавим обработчик события при изменении значения.
        </p>
        <pre>
            <strong>&lt;input id=&quot;slideIndex&quot; type=&quot;text&quot; size=&quot;3&quot; onchange=&quot;initSlidesControlsEventsHandlers()&quot;&gt;</strong>
        </pre>
        <p>
             В HTML-стилях поменяем его визуализацию
        </p>
        <pre>
            <strong>
            #cur-slide {
                text-align: left;
                border: none;
                width: 20px;
            }</strong>
        </pre>
        <p>
            Добавим два новых элемента - текстовые поля, для оторажения разделителя и счетчика общего числа слайдов.
        </p>
        <pre>
            <strong>&lt;span id=&quot;delimiter&quot;&gt;&lt;/span&gt;
            &lt;span id=&quot;count&quot;&gt;&lt;/span&gt;</strong>
        </pre>
        <p>
            Определим новые переменные, отвечающие за наши новые элементы.
        </p>
        <pre>
            <strong>var slideIndexLabel = document.getElementById(&quot;slideIndex&quot;);
            var delimiter = document.getElementById(&quot;delimiter&quot;);
            var allSlidesCount = document.getElementById(&quot;allSlidesCount&quot;);</strong>
        </pre>
        <p>
            Теперь нужно переписать функцию отображения данных о состоянии слайдов.
        </p>
        <pre>
            <strong>function initPlaybackControllerEventsHandlers()
            {
                playbackController.slideChangeEvent().addHandler(function(slideIndex)
                {
                    slideIndexLabel.value = &quot;&quot; + slideIndex;
                    delimiter.innerHTML = &quot;/&quot;;
                    allSlidesCount.innerHTML = &quot;&quot; + (slidesCount - 1);
                });
            }</strong>
        </pre>
        <p>
            И наконец добавить функцию, с помощью которой можно вводить новое значение индекса слайда и переходить к нему.
        </p>
        <pre>
            <strong>function initSlidesControlsEventsHandlers()
            {
                var currentSlideIndex = playbackController.currentSlideIndex();
                var newSlideIndex = slideIndexLabel.value;
                if (newSlideIndex &gt;= 0 &amp;&amp; newSlideIndex &lt;= slidesCount)
                {
                    playbackController.gotoSlide(newSlideIndex);
                }
                else
                {
                    slideIndexLabel.value = currentSlideIndex;
                }
            }</strong>
        </pre>



        <h1>Шаг 7. Добавление кнопки "Play/Pause".</h1>
        <p>
            Добавляем новый элемент, кнопку.
        </p>
        <pre>
          &lt;div class=&quot;navigation&quot;&gt;
          &lt;button id=&quot;prev&quot;&gt;Prev&lt;/button&gt;
          &lt;div id=&quot;slide-counter&quot;&gt;
              &lt;input id=&quot;cur-slide&quot; type=&quot;text&quot; size=&quot;3&quot; onchange=&quot;initSlidesControlsEventsHandlers()&quot;&gt;
              &lt;span id=&quot;delimiter&quot;&gt;&lt;/span&gt;
              &lt;span id=&quot;count&quot;&gt;&lt;/span&gt;
          &lt;/div&gt;
          &lt;button id=&quot;next&quot;&gt;Next&lt;/button&gt;
          <strong>&lt;button id=&quot;play_pause&quot;&gt;Pause&lt;/button&gt;</strong>
      &lt;/div&gt;
        </pre>
        <p>
             В HTML-стилях изменим его визуализацию
        </p>
        <pre>
              #prev, #next,<strong> #play_pause</strong> {
                  float: left;
                  width: 80px;
                  height: 35px;
              }
        </pre>
        <p>
            Добавим новые переменные.
        </p>
        <pre>
            <strong>var PLAY = &quot;Play&quot;;
            var PAUSE = &quot;Pause&quot;;
            var playPauseBtn = document.getElementById(&quot;play_pause&quot;);
            var isPlayedPresentation;</strong>
        </pre>
        <p>
            Добавим функцию изменения состояния добавленной кнопки.
        </p>
        <pre>
            <strong>function changePlayPauseBtnState(isPlayed)
            {
                if (isPlayedPresentation == isPlayed)
                {
                    return;
                }
                isPlayedPresentation = isPlayed;
                playPauseBtn.innerHTML = (isPlayedPresentation) ? PAUSE : PLAY;
            }</strong>
        </pre>
        <p>
            Изменим функцию инициализации событий кнопок так, чтобы презентация
            ставилась на паузу или начинала проигрываться при нажатии на новую кнопку.
        </p>
        <pre>
          function initButtonsEventsHandlers()
          {
              prevBtn.onclick = function()
              {
                  playbackController.gotoPreviousSlide();
                  <strong>changePlayPauseBtnState(true);</strong>
              };

              <strong>playPauseBtn.onclick = function()
              {
                  if (isPlayedPresentation)
                  {
                      playPauseBtn.innerHTML = PLAY;
                      playbackController.pause();
                  }
                  else
                  {
                      playPauseBtn.innerHTML = PAUSE;
                      playbackController.play();
                  }
                  isPlayedPresentation = !isPlayedPresentation;
              };</strong>

              nextBtn.onclick = function()
              {
                  playbackController.gotoNextSlide();
                  <strong>changePlayPauseBtnState(true);</strong>
              };
          }
        </pre>
        <p>
            Добавим вызов функции изменения состояния кнопки в функцию подключения к презентации.
        </p>
        <pre>
          ispringPresentationConnector.register = function(player)
              {
                  presentation = player.presentation();
                  slidesCount = presentation.slides().count();
                  playbackController = player.view().playbackController();

                  <strong>changePlayPauseBtnState(presentation.settings().playback().autoStart());</strong>
                  initButtonsEventsHandlers();
                  initPlaybackControllerEventsHandlers();
              }
        </pre>



        <h1>Шаг 8. Добавление панели со списком слайдов.</h1>
        <p>
            Добавляем новый элемент - блок, в котором будет динамическая панель со слайдами.
        </p>
        <pre>
            <strong>.slidesNavigation{
                margin-top: -542px;
                margin-right: 250px;
                float: right;
                width: 200px;
                height: 540px;
                border: 1px solid #000;
                clear: both;
            }</strong>
        </pre>

    </body>
</html>
